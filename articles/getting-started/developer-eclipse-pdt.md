<!-- Filename: J4.x:Developer:_Eclipse_PDT / Display title: Eclipse PDT -->

## Введение

Как PHP-разработчику вам понадобятся некоторые инструменты, которые помогут в вашей работе. Eclipse — это IDE (Интегрированная Среда Разработки), которая может использоваться для самых разных проектов на различных языках программирования. Eclipse PDT (PHP Developer Tools) включает расширения, необходимые для разработки на PHP. Некоторые из функций, упомянутых на его главной странице, включают:

- Подсветка синтаксиса
- Проверка синтаксиса
- Автодополнение кода
- Навигация по коду
- Отладка PHP (Zend Debugger / Xdebug)
- Профилирование PHP (Zend Debugger / Xdebug)

Добавьте к этому возможность копировать файлы туда, где они должны быть на вашем локальном тестовом веб-сайте, и создавать zip-файл, материалов хватит на годы работы. Изучение того, как использовать Eclipse PDT, занимает время, день или около того, но это оправдывает себя. Существуют и другие IDE и редакторы кода!

### Альтернативы

**IDE** обладают всеми необходимыми функциями для создания проектов на PHP. Примеры кроссплатформенных IDE, которые, как известно, используются некоторыми разработчиками Joomla, включают:

- **JetBrains PhpStorm** Коммерческий, кроссплатформенный.
- **Apache NetBeans** Бесплатный, с открытым исходным кодом, кроссплатформенный.
- **Visual Studio Code** Бесплатный, кроссплатформенный.

**Редакторы PHP** хорошо подходят для редактирования кода, но им не хватает некоторых функций, необходимых для крупных проектов. Примеры включают:

- **Notepad++** Бесплатно, только для Windows.

## Установка Eclipse PDT

Перейдите на веб-сайт [Eclipse PDT](https://www.eclipse.org/pdt/) и скачайте версию, доступную для вашей платформы (Linux, Mac или Windows).

Следуйте инструкциям по установке для вашей платформы.

## Рабочее пространство Eclipse

Ваш проектный код будет находиться как минимум в трех различных местах:

- Файлы **исходного кода проекта** — это те, которые вы создаёте и редактируете самостоятельно. Они не должны находиться в вашей веб-древе. Они должны находиться в вашем личном файловом пространстве. Примеры, где каждый проект будет в отдельной подпапке:
  - /Users/username/git (Mac)
  - /home/username/git (Linux)
  - ... (Windows)
- Расположение **веб-дерева** зависит от установки вашего программного стека. Вы можете использовать своё собственное файловое пространство. Примеры:
  - /Users/username/Sites/j4test (Mac)
  - /home/username/public_html/j4test (Linux)
  - ... (Windows).
- **Рабочая область Eclipse** — это место, где Eclipse хранит информацию об отдельных проектах. Стандартное расположение — корень вашего личного файлового пространства. Примеры:
  - /Users/username/eclipse-workspace (Mac)
  - /home/username/eclipse-workspace (Linux)
  - ... (Windows).

Готовы начать Eclipse?

## Запуск Eclipse

После запуска вас попросят подтвердить различные настройки. На каком-то этапе вас попросят выбрать рабочую область. По умолчанию это /home/username/eclipse-workspace, но вы хотите создать подпапку для каждого проекта, поэтому выберите кнопку "Обзор", а затем кнопку "Новая папка". В примере ниже я создал папку j4tutorials.

![Choose eclipse workspace location](../../../en/images/getting-started/eclipse-pdt-choose-workspace.png)

Выберите кнопку **Запуск**. Если что-то не так, вы можете выбрать Файл / Переключить рабочее пространство на более позднем этапе и сделать это снова. Вы также можете удалить неиспользуемые рабочие пространства позже.

При первом запуске вам будет представлен экран приветствия. Вы также можете перейти на этот экран из меню **Помощь / Приветствие**.

![Eclipse welcome screen](../../../en/images/getting-started/eclipse-pdt-welcome.png)

Начните с обзора настроек конфигурации IDE. Вы можете отметить или снять отметку с любых, которые кажутся подходящими, или пропустить, если не уверены. Вы также можете изменить настройки позже.

## Создать новый PHP проект

Первый проект, который нужно добавить, это код веб-сайта для тестирования. Он необходим для проверки того, что ваши файлы копируются в нужные места, а также для дальнейшей отладки. Выберите элемент на экране приветствия. Если вы перешли в рабочую область Eclipse, выберите Создать PHP проект в обозревателе проектов (Project Explorer). В форме Новый PHP проект (New PHP Project):

- Введите подходящее имя проекта. Это должно быть короткое слово, которое будет отображаться в обозревателе проектов.
- Выберите радиокнопку **Создать проект в существующем расположении (из существующего источника)**.
- **Просмотрите** расположение вашего тестового веб-сайта Joomla и выберите его.
- Выберите **Готово**.

![Eclipse new php project](../../../en/images/getting-started/eclipse-pdt-new-project.png)

Ваши файлы веб-сайта будут добавлены в Project Explorer. Это может занять одну-две минуты, так как Eclipse выполняет некоторые подготовительные действия в фоновом режиме. Вы можете выбрать проект, чтобы развернуть первый уровень папок.

Два файла будут добавлены в вашу папку сайта: .buildpath и .project. Поскольку они начинаются с точки (.), вы можете их не увидеть и не беспокоиться о них. Это XML-файлы, содержащие информацию, используемую Eclipse.

## Перспективы PHP

Коллекция панелей на экране Eclipse называется перспективой. Две наиболее часто используемые — это PHP перспектива и перспектива отладки. Вы можете переключаться между ними, используя значки в правом верхнем углу панели инструментов. Вы также можете использовать меню: Окно / Перспектива / Открыть перспективу / PHP или Отладка.

Следующие иллюстрации показывают PHP Perspective с открытыми формами редактирования.

![Eclipse php perspective](../../../en/images/getting-started/eclipse-pdt-php-perspective.png)

Панели Eclipse:

- В левой панели находится обозреватель проектов, где вы можете перемещаться по структуре файлов.
- В верхней центральной панели отображаются открытые текстовые редакторы.
- В правой верхней панели обычно показан контур выбранной панели редактирования. Она может отображать другую информацию.
- В правой нижней панели отображается одна из множества доступных представлений, выбираемых из меню Окно / Показать представление.

Представление Проблемы указывает Ошибки (100 из 791 элементов) и Предупреждения (100 из 11629). Это кажется много, но не о чем беспокоиться.

## Новый проект Hello Universe на PHP

Вы теперь готовы создать новый проект PHP для расширения, которое собираетесь разработать. В качестве примера вы можете начать с простого компонента, названного com_hellouniverse. Для меня код Hello Universe будет находиться в /Users/username/git/j4xtutorials-com-hellouniverse, и я буду использовать j4xtutorials в качестве своего пространства имен (первое слово в пространстве имен компонента).

В меню Eclipse выберите Файл / Новый / PHP Проект. Форма показана выше. Мои данные:

- Название проекта: HelloUniverse
- Содержание: выберите Создать проект в существующем расположении (из существующего источника).
- Обзор: перейдите в /Home/username/git и выберите кнопку Новая папка.
- В диалоговом окне Новая папка введите j4xtutorials-com-hellouniverse и нажмите Создать.
- С этой открытой пустой папкой выберите Открыть.
- Выбранный каталог должен содержать: /Users/username/git/j4xtutorials-com-hellouniverse
- Выберите Завершить.

Теперь вы увидите новый проект в обозревателе проектов вместе с вашим проектом веб-сайта. Новый проект содержит два элемента, оба связанные с поддержкой PHP. Есть некоторые скрытые элементы, используемые Eclipse: .settings (папка), .buildpath и .project.

## Добавить папку com_hellouniverse

С выбранным проектом HelloUniverse:

- Выберите пункт меню File или щелкните правой кнопкой мыши по названию проекта.
- Выберите пункты меню New / Folder.
- В форме New Folder в поле Folder name: введите com_hellouniverse.
- Выберите Finish.

Папка com_hellouniverse — это место, куда будет помещаться код вашего расширения. Всё, что находится внутри этой папки, окажется в zip-файле, который вы сможете использовать для установки в Joomla. Всё, что находится вне этой папки, используется для других целей. Два общих файла на этом уровне:

- README.md — это текстовый файл в формате Markdown, который описывает компонент. Такие файлы часто используются вместе с удаленным хранилищем кода, например, на Github (подробнее об этом в другом месте).
- build.xml — это файл, содержащий инструкции о том, что делать после того, как вы внесли изменения в код. Обычно вам нужно будет скопировать измененные файлы в нужные места в структуре вашего веб-сайта и заново сгенерировать zip-файл. Затем, для большинства изменений, вы можете просто перезагрузить веб-страницу, над которой работаете. Вам не нужно переустанавливать компонент. Это позволяет значительно сэкономить время!

## Добавить папки admin, site и media

- Выберите папку com_hellouniverse и используйте пункты меню Файл / Новый / Папка, чтобы создать новую папку с именем admin.
- Снова на этот раз создайте новую папку с именем media. ВНИМАНИЕ: убедитесь, что родительская папка — com_hellouniverse, а не HelloUniverse.
- Снова на этот раз создайте новую папку с именем site. Если она создана в неправильном месте, ее можно перетащить в нужное место.

## build.xml

Следующий код содержит пример файла build.xml, который нужно разместить в корне вашего проекта HelloUniverse.

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project name="hellouniverse" basedir="." default="main">
    <property file=".project" />

    <!-- Source and Destinations -->

    <property name="package"  value="${phing.project.name}" override="true" />
    <property name="srcdir" value="${project.basedir}/com_hellouniverse" override="true" />
    <property name="sitedir" value="/Users/username/Sites/j4tutorials"  override="true" />
    <property name="zipsdir" value="/Users/username/zips"  override="true" />

    <!-- Filesets -->

    <fileset dir="${srcdir}/admin" id="adminfiles">
        <include name="**" />
    </fileset>
    <fileset dir="${srcdir}/media" id="mediafiles">
        <include name="**" />
    </fileset>
    <fileset dir="${srcdir}/site" id="sitefiles">
        <include name="**" />
    </fileset>
    <fileset dir="${srcdir}" id="allfiles">
        <include name="**" />
    </fileset>

    <!-- Targets -->

    <target name="main" description="main target">
        <copy todir="${sitedir}/administrator/components/com_hellouniverse">
            <fileset refid="adminfiles" />
        </copy>
        <copy todir="${sitedir}/media/com_hellouniverse">
            <fileset refid="mediafiles" />
        </copy>
        <copy todir="${sitedir}/components/com_hellouniverse">
            <fileset refid="sitefiles" />
        </copy>
        <zip destfile="${zipsdir}/com_hellouniverse.zip">
            <fileset refid="allfiles" />
        </zip>
    </target>
</project>
```

Некоторые объяснения:

- **srcdir** — это место в файловой системе, где находится ваш исходный код, откуда копируются файлы.
- **sitedir** — это место в файловой системе, где находится ваш тестовый сайт, куда копируются файлы.
- **zipsdir** — место для zip-файла — я нахожу удобным хранить zip-файлы проекта из разных проектов вместе в папке zips.
- **Файловые наборы** — это группы источников для копирования в разные места назначения. означает все папки и файлы.
- **Цели** — это места назначения и что нужно туда копировать.

Создайте файл build.xml, содержащий приведенный выше код:

- Выберите Файл / Новый / XML файл в меню Eclipse.
- Убедитесь, что HelloUniverse выбрано в качестве родителя, и введите имя build.xml (именно так).
- Выберите Завершить
- В представлении Исходник (выберите в нижнем левом углу) скопируйте и вставьте код выше вместо уже существующей строки.
- Сохраните.

Чтобы это работало, вам нужен инструмент сборки: Phing.

## Инструмент сборки Phing¶

Перейдите на сайт [Phing](https://www.phing.info/) и скачайте архив Phar. Вы можете использовать эту [прямую ссылку](https://www.phing.info/get/phing-latest.phar). Сохраните файл в папке phing в вашей личной папке bin /Users/username/bin/phing. Измените разрешения файла на 755, чтобы его можно было запускать из командной строки. Чтобы протестировать, откройте терминал, перейдите в свою папку bin/phing и введите ./phing-latest.phar -v, чтобы увидеть номер версии. Запомните полный путь к файлу:

- /Users/username/bin/phing/phing-latest.phar

Вам это понадобится позже.

## Настройки Eclipse - Сборщики

Здесь вы настраиваете Phing для сборки вашего проекта каждый раз, когда вносите изменения в код.

- В обозревателе проектов выберите проект HelloUniverse.
- Выберите пункты меню Файл / Свойства.
- В диалоговом окне Свойства выберите Сборщики, затем нажмите кнопку Новый.
- В диалоговом окне Тип конфигурации выберите Программа и нажмите ОК.
- В диалоговом окне редактирования свойств конфигурации запуска введите подходящее название: Сборка HelloUniverse.
- В поле Расположение введите путь к программе phing или используйте кнопку Обзор файловой системы для поиска: /Users/ceford/bin/phing/phing-latest.phar
- Для поля Рабочий каталог выберите кнопку Обзор рабочего пространства, затем выберите HelloUniverse.
- Нажмите ОК, затем Применить и Закрыть.

Для тестирования: выберите пункты меню Проект / Построить проект. Представление консоли в нижней части экрана будет показывать ход сборки. На этом этапе, скорее всего, будет отображаться СБОРКА НЕ УДАЛАСЬ красным цветом. Это ожидаемо - папки компонентов будут созданы при установке zip-файла. Их пока не существует, так как нет кода. Но это показывает, что инструмент сборки Phing работает.

## Как отлаживать

Когда что-то идет не так, вы можете захотеть пройтись по коду шаг за шагом, чтобы увидеть, что на самом деле происходит. Если вы установили «Debug System» в положение «Да» и «Error Reporting» на максимум в глобальной конфигурации Joomla, у вас может быть трассировка стека, чтобы показать, где возникает ошибка в коде. Или вы можете заметить что-то необычное в выводе и иметь представление о том, где может быть ошибка. В любом случае вам нужно установить точки останова, где выполнение приостановится, что позволит вам увидеть значения переменных и продвигаться по коду построчно.

### Установить точку останова

Точки останова должны быть установлены в проекте веб-сайта J4Tutorials. Например, в панели проводника проекта разверните проект J4Tutorials и найдите administrator / components / com_users / src / Model, затем дважды щелкните на UsersModel.php, чтобы открыть его в окне редактирования. Перейдите на строку 87 и дважды щелкните на номер 87. Появится маленький синий маркер, указывающий, что точка останова была установлена. Выполнение кода должно остановиться здесь, когда вы просматриваете список пользователей через пункты меню Administrator / Users / Manage.

### Создание конфигурации отладки

В верхнем меню выберите Run / Debug Configurations. В форме введите узнаваемое название, например Debug Admin, чтобы затем выбрать из выпадающего списка. Убедитесь, что выбран файл /J4Tutorials/administrator/index.php. В панели Common формы выберите Debug из списка Display in favorites menu. Убедитесь, что в качестве отладчика установлен Xdebug. Нажмите Apply и Close.

Теперь вы можете выбрать Debug Admin из выпадающего списка отладки на панели инструментов, значок символа ошибки.

![Eclipse debug tools](../../../en/images/getting-started/eclipse-pdt-debug-tools.png)

Значки отладки, наведите курсор для меток:

- **Пропустить все точки останова** Переключатель для пропуска точек останова, кроме первой строки index.php.
- **Продолжить** Продолжить нормальное выполнение до следующей точки останова.
- **Прекратить** Остановить отладку (но также необходимо удалить cookie Xdebug).
- **Шаг внутрь** На строке, содержащей вызов функции, перейти внутрь этой функции.
- **Шаг через** На строке, содержащей вызов функции, не входить в эту функцию.
- **Шаг из** Внутри функции пропустить остановку на каждой строке и вернуться к вызывающему коду.

### Процедура отладки

При запуске отладки выполнение приостанавливается на первой строке administrator/index.php. Это домашняя страница Dashboard. Вам нужно выбрать символ Продолжить (желтая полоса и зеленый треугольник вправо). Через секунду или около того происходит больше активности и больше остановленных удаленных запусков в левом админ-панели отладки. Это домашняя страница, использующая ajax для получения обновленной информации. Просто продолжайте нажимать Продолжить, пока активность не прекратится. Затем в вашем браузере выберите элемент Пользователи из домашней страницы Dashboard. Eclipse активизируется и останавливает выполнение на установленной вами точке останова.

![Eclipse PHP debug perspective](../../../en/images/getting-started/eclipse-pdt-debug-perspective.png)

Особенности, на которые стоит обратить внимание:

- Текущая строка кода отмечена бледно-зеленым фоном.
- Левая панель показывает трассировку стека - предыдущие вызовы функций, которые привели к текущей функции. Выберите любой элемент, чтобы увидеть родительский код.
- Правая панель может показывать либо активные переменные, либо точки останова. Разверните объекты по мере необходимости, чтобы увидеть подробности.

### Некоторые проблемы

- Отсутствие остановки на точках останова: Это происходит, если вы открываете другую программу PHP, такую как phpMyAdmin. Чтобы исправить:
  - Перейдите в Run / Debug Configurations и выберите ваш элемент Debug Admin.
  - Во вкладке Debugger выберите Configure...
  - В Path Mapping выберите и удалите любой путь, не связанный с вашим тестовым веб-сайтом.
  - Выберите Finish - возможно, вам потребуется завершить и перезагрузить сеанс отладки.
- Отладка возобновляется после нажатия кнопки Terminate. Чтобы исправить:
  - Используйте инструменты разработчика вашего браузера, чтобы открыть окно инспекции.
  - Найдите куки, которые использует ваш браузер (Storage в Firefox)
  - Выберите и удалите куки XDebug.

## Использование Git

Git — это система управления версиями, широко используемая для управления любым текстом, в основном кодом, но это может быть что угодно. Он работает из командной строки, но обычно вызывается графическими инструментами, такими как Eclipse. Если вы хотите узнать о git, посетите [веб-сайт git](https://git-scm.com/).

Если вы хотите использовать git, вам нужно установить его для вашей платформы. Затем в Eclipse выберите ваш проект HelloUniverse, щелкните правой кнопкой мыши и выберите Team / Share Project. В диалоговом окне Share Project выберите **Использовать или создать репозиторий в родительской папке проекта** и выберите проект HelloUniverse из списка. Есть поле для указания, где будет создан репозиторий (/Users/ceford/git/j4xtutorials-com-hellouniverse) - выберите соседнюю кнопку Create Repository. Наконец, выберите кнопку Finish.

![Configure Git Repository](../../../en/images/getting-started/eclipse-pdt-configure-git.png)

Вы заметите, что рядом с элементами в представлении Project Explorer появились некоторые новые украшения:

- Маркер \> указывает, что существует измененное содержимое, которое не было зафиксировано в репозитории.
- Маркер ? указывает, что этот элемент не был добавлен в список отслеживаемых элементов.

![Git Markers](../../../en/images/getting-started/eclipse-pdt-git-markers.png)

Теперь у вас настроено управление версиями. Щелкните правой кнопкой мыши на проекте и посмотрите, как выглядит меню «Команда». Слишком много, чтобы охватить здесь!

## Наконец

Готовы начать работать над своим кодом?

*Переведено openai.com*

